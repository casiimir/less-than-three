{"version":3,"sources":["Search.js","App.js","index.js"],"names":["Search","populateGameItem","useState","gameList","setGameList","getDataGamesFrom","a","submit","document","querySelector","fetch","value","result","json","data","className","onSubmit","e","preventDefault","type","name","id","placeholder","App","storeList","setStoreList","runSearch","setRunSeach","pageNumber","setPageNumber","useEffect","getDeals","getStoreIDs","filter","v","i","findIndex","t","title","returnStoreImgBy","storeID","store","images","icon","list","map","game","external","length","substring","src","thumb","alt","normalPrice","salePrice","cheapest","href","dealID","cheapestDealID","onClick","searchExpanderBtn","textContent","setTimeout","window","scrollTo","body","offsetHeight","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0e94fd37.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport './Search.css';\r\n\r\nfunction Search({ populateGameItem }) {\r\n\r\n  const [gameList, setGameList] = useState([]);\r\n\r\n  const getDataGamesFrom = async() => {\r\n    const submit = document.querySelector('#searchInput');\r\n\r\n    const result = await fetch(`https://www.cheapshark.com/api/1.0/games?title=${submit.value}`)\r\n    const data = await result.json();\r\n\r\n    setGameList(data);\r\n  }\r\n\r\n  const clearInputField = () => {\r\n    const searchInput = document.querySelector('#searchInput');\r\n\r\n    searchInput.value = '';\r\n  }\r\n\r\n  const onFormSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    getDataGamesFrom(gameList);\r\n    clearInputField();\r\n  }\r\n\r\n  return (\r\n    <div className=\"search\">\r\n      <form onSubmit={ onFormSubmit }>        \r\n        <input type=\"search\" name=\"\" id=\"searchInput\" placeholder=\"Title ...\" />\r\n        <button type=\"submit\"> Find it! </button>\r\n      </form>\r\n\r\n      <ul className=\"gameList\">\r\n        { populateGameItem(gameList) } \r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport Search from './Search';\r\n\r\nconst rmDuplicateGame = (list) => list.filter((v,i,a)=>a.findIndex(t=>(t.title === v.title))===i);\r\n\r\nfunction App() {\r\n\r\n  const [gameList, setGameList] = useState('');\r\n  const [storeList, setStoreList] = useState('');\r\n  const [runSearch, setRunSeach] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(0);\r\n  \r\n  useEffect(() => {\r\n    getDeals();\r\n    getStoreIDs();\r\n    \r\n    setPageNumber(1)\r\n  }, []);\r\n  \r\n  const getDeals = async() => {\r\n    const result = await fetch(`https://www.cheapshark.com/api/1.0/deals?&sortBy=deal+rating&onSale=1&upperPrice=3&metacritic=60&onSale=1&pageNumber=${pageNumber}`);\r\n    const data = await result.json();\r\n\r\n    setGameList(rmDuplicateGame(data));\r\n  }\r\n\r\n  const getStoreIDs = async() => {\r\n    const result = await fetch(`https://www.cheapshark.com/api/1.0/stores`);\r\n    const data = await result.json();\r\n\r\n    setStoreList(data);\r\n  }\r\n\r\n  const returnStoreImgBy = (storeID) => {\r\n    for (let store of storeList) {\r\n      if(storeID === store.storeID) {\r\n        return store.images.icon;\r\n      }\r\n    }\r\n  }\r\n\r\n  // utility: check if TOT savings is than 70%\r\n  // const getListBySaving = (list) => list.filter((game) => game.savings >= 80);\r\n  const setReSizeGameTitle = (title) => title.length <= 18 ? title : title.substring(0, 13) + '...';\r\n\r\n  // const setRandomColour = () => '#' + Math.floor(Math.random()*12914665).toString(16);\r\n\r\n  const populateGameItem = (list) => {\r\n    \r\n    return list.map((game, i) =>\r\n      <li key={ i } className=\"gameList__item\">\r\n        <div className=\"gameList__item--naming\">\r\n          <h3>{ setReSizeGameTitle(game.title || game.external) }</h3>\r\n          <img src={ game.thumb } alt={ game.title || game.external }/>\r\n        </div>\r\n\r\n        <div className=\"gameList__item--anim\">\r\n          <div className=\"shape\">\r\n            <img src={ `https://www.cheapshark.com/${ returnStoreImgBy(game.storeID) || '/img/stores/icons/26.png' }`  }\r\n                 alt={ game.title || game.external }/>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"gameList__item--info\">\r\n          <p className=\"ex--price\">{ game.normalPrice || 'tot' }</p>\r\n          <p className=\"actual--price\">{ game.salePrice || game.cheapest }</p>\r\n          <a href={ `https://www.cheapshark.com/redirect?dealID=${game.dealID || game.cheapestDealID}` }>buy it!</a>\r\n        </div>\r\n      </li>\r\n    );\r\n  } \r\n\r\n  const btnSearchShow = () => {\r\n    const searchExpanderBtn = document.querySelector('.searchExpanderBtn');\r\n    \r\n    if (searchExpanderBtn.textContent === 'üè†') {\r\n      searchExpanderBtn.textContent = 'üîç';\r\n    } else {\r\n      searchExpanderBtn.textContent = 'üè†';\r\n    }\r\n\r\n    runSearch ? setRunSeach(false) : setRunSeach(true);\r\n  }\r\n\r\n  const pageLeftBtn = () => {\r\n    if (pageNumber > 1) {\r\n      setTimeout(() => {\r\n        window.scrollTo(0, document.body.offsetHeight);\r\n        setPageNumber(pageNumber - 1);\r\n        getDeals();\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n  const pageRightBtn = () => {\r\n    if (pageNumber < 9) {\r\n      setTimeout(() => {\r\n\r\n        window.scrollTo(0,0);\r\n        setPageNumber(pageNumber + 1);\r\n        getDeals();\r\n      }, 200);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header>\r\n        <h3>Less Than</h3>\r\n        <h2>3</h2>\r\n      </header>\r\n      <button className=\"searchExpanderBtn\" onClick={ btnSearchShow }>üîç</button>\r\n      {\r\n        runSearch ? <Search populateGameItem={ populateGameItem }/> : \r\n        <>\r\n          <button className=\"navButtonLeft\" onClick={ pageLeftBtn }>\r\n            { '<' }\r\n          </button>\r\n            <ul className=\"gameList\">\r\n              { gameList ? populateGameItem(gameList) : null }\r\n            </ul>\r\n          <button className=\"navButtonRight\" onClick={ pageRightBtn }>\r\n          { '>' }\r\n          </button>\r\n          <div className=\"pageFooter\">\r\n            <p className=\"pageFooter--text\">Less Than <em>3</em>, by Casiimir. &copy; 2021</p>\r\n            <div className=\"pageFooter--status\">\r\n              <p>Page:</p>\r\n              <p> { pageNumber }</p>\r\n            </div>\r\n          </div>\r\n        </>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}